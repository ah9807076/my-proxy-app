<!DOCTYPE html> <html lang="en"> <head> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <title>Fetch and Display WhatsApp Numbers</title> <style> #progress-wrapper { width: 100%; background-color: #ddd; } #progress-bar { width: 0%; height: 30px; background-color: #4caf50; text-align: center; line-height: 30px; color: white; } </style> </head> <body> <div id="progress-wrapper"> <div id="progress-bar">0%</div> </div> <div>Fetching ID: <span id="current-id"></span></div> <div id="output"></div> <script> const ids = ["10730774", "10733054", "10736035", "10738241"]; const baseUrl = "https://your-deployment-url/fetch?url=https://eg.waseet.net/ar/post/shqt-bmwq-mtmyz-bbyt-aywtn-"; const results = []; async function fetchHtml(id) { const url = `${baseUrl}${id}`; const response = await fetch(url); const text = await response.text(); const parser = new DOMParser(); const doc = parser.parseFromString(text, text/html); const selectors = [ a.flex.items-center.justify-center.gap-2.rounded-lg.bg-txt_blue.py-3.text-white[href^=https://wa.me/], a.flex.w-[200px].flex-row.items-center.justify-center.gap-3.rounded-lg.border-2.py-1[href^=https://wa.me/] ]; let foundNumbers = []; selectors.forEach(selector => { const anchorTags = doc.querySelectorAll(selector); anchorTags.forEach(anchorTag => { foundNumbers.push(anchorTag.href.split("https://wa.me/")[1]); }); }); if (foundNumbers.length > 0) { foundNumbers.forEach(number => { const result = `ID: ${id} - WhatsApp Number: ${number}`; results.push(result); const outputDiv = document.createElement("div"); outputDiv.innerText = result; document.getElementById("output").appendChild(outputDiv); }); } else { const result = `ID: ${id} - WhatsApp number not found`; results.push(result); const outputDiv = document.createElement("div"); outputDiv.innerText = result; document.getElementById("output").appendChild(outputDiv); } } async function fetchAll() { for (let i = 0; i < ids.length; i++) { document.getElementById("current-id").innerText = ids[i]; await fetchHtml(ids[i]); const progress = Math.round(((i + 1) / ids.length) * 100); const progressBar = document.getElementById("progress-bar"); progressBar.style.width = `${progress}%`; progressBar.innerText = `${progress}%`; } const blob = new Blob([results.join("\n")], { type: "text/plain" }); const blobUrl = URL.createObjectURL(blob); const a = document.createElement("a"); a.href = blobUrl; a.download = "whatsapp_numbers.txt"; document.body.appendChild(a); a.click(); document.body.removeChild(a); } fetchAll(); </script> </body> </html>
