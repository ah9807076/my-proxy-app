<!DOCTYPE html> <html lang="en"> <head> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <title>Fetch and Display Phone Numbers</title> <style> #progress-wrapper { width: 100%; background-color: #ddd; } #progress-bar { width: 0%; height: 30px; background-color: #4caf50; text-align: center; line-height: 30px; color: white; } </style> </head> <body> <div id="progress-wrapper"> <div id="progress-bar">0%</div> </div> <div>Fetching URL: <span id="current-url"></span></div> <div id="output"></div> <script> const urls = [ "https://your-deployment-url/fetch?url=https://example.com/page1", "https://your-deployment-url/fetch?url=https://example.com/page2", "https://your-deployment-url/fetch?url=https://example.com/page3", "https://your-deployment-url/fetch?url=https://example.com/page4" ]; const results = []; async function fetchHtml(url) { const response = await fetch(url); const text = await response.text(); const parser = new DOMParser(); const doc = parser.parseFromString(text, text/html); const anchorTags = doc.querySelectorAll("a[href^=https://wa.me/]"); let foundNumbers = []; anchorTags.forEach((anchorTag) => { foundNumbers.push(anchorTag.href.split("https://wa.me/")[1]); }); if (foundNumbers.length > 0) { foundNumbers.forEach((number) => { const result = `URL: ${url} - Phone Number: ${number}`; results.push(result); const outputDiv = document.createElement("div"); outputDiv.innerText = result; document.getElementById("output").appendChild(outputDiv); }); } else { const result = `URL: ${url} - Phone number not found`; results.push(result); const outputDiv = document.createElement("div"); outputDiv.innerText = result; document.getElementById("output").appendChild(outputDiv); } } async function fetchAll() { for (let i = 0; i < urls.length; i++) { const url = urls[i]; document.getElementById("current-url").innerText = url; await fetchHtml(url); const progress = Math.round(((i + 1) / urls.length) * 100); const progressBar = document.getElementById("progress-bar"); progressBar.style.width = `${progress}%`; progressBar.innerText = `${progress}%`; } const blob = new Blob([results.join("\n")], { type: "text/plain" }); const blobUrl = URL.createObjectURL(blob); const a = document.createElement("a"); a.href = blobUrl; a.download = "phone_numbers.txt"; document.body.appendChild(a); a.click(); document.body.removeChild(a); } fetchAll(); </script> </body> </html>
